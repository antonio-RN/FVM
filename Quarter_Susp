model Quarter_Susp
  import g = Modelica.Constants.g_n;
  import Modelica.Units.SI.*;
  import source_Force = Modelica.Mechanics.Translational.Sources.Force;
  import Modelica.Mechanics.Translational.Components.Spring;
  import Modelica.Mechanics.Translational.Components.Damper;
  import Modelica.Mechanics.Translational.Components.Mass;
  import Modelica.Mechanics.Translational.Components.Fixed;
  source_Force fz "Force coming from sprung chassis into suspension (Z_axis)";
  Force fx "Longitudinal force generated by the tire applied directly to sprung chassis fixing point (X-axis)";
  Force fy "Lateral force generated by the tire applied directly to sprung chassis fixing point (Y-axis)";
  source_Force unsprung_fz(f = unsprung_mass.m * g) "Force equivalent to unsprung weight";
  Spring spring(c = 45000, s_rel0 = 0.3) "Suspension spring";
  Damper damper(d = 3500, s_nominal = 0.3) "Suspension damper";
  Mass unsprung_mass(m = 25) "Representation of unsprung mass (wheel assembly + half suspension links weight)";
  Spring tire(c = 120000, s_rel0 = 0.1) "Tire rubber equivalent spring";
  Damper tire_damp(d = 1000, s_nominal = 0.1) "Tire rubber equivalent damping";
  Fixed ground "Flat horizontal ground (z=0)";
equation
//Component connection (spring-damper in parallel -> unsprung_mass -> tire spring-tire damp in parallel)
//Vertical load coming from chassis (fz) applied to upper link (spring.flange_a)
  connect(fz.flange, spring.flange_a);
  connect(fz.flange, damper.flange_a);
  connect(unsprung_fz.flange, unsprung_mass.flange_a);
  connect(spring.flange_b, unsprung_mass.flange_a);
  connect(damper.flange_b, unsprung_mass.flange_a);
  connect(unsprung_mass.flange_b, tire.flange_a);
  connect(unsprung_mass.flange_b, tire_damp.flange_a);
  connect(tire.flange_b, ground.flange);
  connect(tire_damp.flange_b, ground.flange);
end Quarter_Susp;
