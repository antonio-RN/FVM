function Tire_force
  input Real B "Magic Formula Stiffness factor";
  input Real C "Magic Formula Shape factor";
  input Real D "Magic Formula Peak factor";
  input Real E "Magic Formula Curvature factor";
  input Real Sv "Magic Formula Vertical shift";
  input Real Sh "Magic Formula Horizontal shift";
  input Real x "Magic Formula input variable: slip ratio for longitudinal force, tan(slip angle) for lateral force";
  output Modelica.Units.SI.Force f "Lateral force generated by the tire"; 
  
protected 
  Real x_0 "Adjusted input variable with horizontal shift";
  
algorithm
  x_0 := x + Sh;
  f := D * sin(C * atan(B * x_0 - E * (B * x_0 - atan(B * x_0)))) + Sv;

end Tire_force;
